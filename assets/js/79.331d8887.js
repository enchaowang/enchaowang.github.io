(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{344:function(t,s,e){"use strict";e.r(s);var a=e(13),n=Object(a.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"pod调度"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pod调度"}},[t._v("#")]),t._v(" pod调度")]),t._v(" "),s("ul",[s("li",[t._v("默认情况pod在哪个node运行是由scheduler组件算出来的")])]),t._v(" "),s("h3",{attrs:{id:"四种调度方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#四种调度方式"}},[t._v("#")]),t._v(" 四种调度方式")]),t._v(" "),s("ul",[s("li",[t._v("自动调度：完全由scheduler决定")]),t._v(" "),s("li",[t._v("定向调度：NodeName NodeSelector")]),t._v(" "),s("li",[t._v("亲和性调度: NodeAffinity、PodAffinity、PodAntiAffinity")]),t._v(" "),s("li",[t._v("污点（容忍）调度: Taints、Toleration\n"),s("ul",[s("li",[t._v("pod能够容忍node有缺点")])])])]),t._v(" "),s("h2",{attrs:{id:"定向调度"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#定向调度"}},[t._v("#")]),t._v(" 定向调度")]),t._v(" "),s("ul",[s("li",[t._v("强制性，如果没有合适的node节点，pod不会成功运行")])]),t._v(" "),s("h3",{attrs:{id:"nodename"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nodename"}},[t._v("#")]),t._v(" NodeName")]),t._v(" "),s("ul",[s("li",[t._v("跳过了scheduler调度逻辑")]),t._v(" "),s("li",[t._v("pod和node一对一")])]),t._v(" "),s("div",{staticClass:"language-yml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spec")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("containers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("nodeName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" node1 "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# node节点的名字")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("h3",{attrs:{id:"nodeselector"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nodeselector"}},[t._v("#")]),t._v(" NodeSelector")]),t._v(" "),s("ul",[s("li",[t._v("将pod调度到指定标签的node节点")]),t._v(" "),s("li",[t._v("k8s的 label-selector机制实现")]),t._v(" "),s("li",[t._v("pod创建之前scheduler会使用MatchNodeSelector调度策略进行label匹配")]),t._v(" "),s("li",[t._v("也是强制")])]),t._v(" "),s("div",{staticClass:"language-yml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spec")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("nodeSelector")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("nodeenv")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" pro  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 通过标签选择")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("h2",{attrs:{id:"亲和性度调度-优先级"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#亲和性度调度-优先级"}},[t._v("#")]),t._v(" 亲和性度调度 优先级")]),t._v(" "),s("ul",[s("li",[t._v("nodeAffinity: node亲和性\n"),s("ul",[s("li",[t._v("node为目标，解决pod调度到那些node的问题")])])]),t._v(" "),s("li",[t._v("podAffinity: pod亲和性\n"),s("ul",[s("li",[t._v("以pod为目标，解决pod和pod部署在同一个拓扑结构中")])])]),t._v(" "),s("li",[t._v("podAntiAffinity: 反pod亲和性\n"),s("ul",[s("li",[t._v("pod为目标，某些pod尽可能不部署在一个拓扑结构")])])])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("亲和性和反亲和性应用场景")]),t._v(" "),s("ul",[s("li",[t._v("亲和性\n"),s("ul",[s("li",[t._v("两个频繁交互的应用，有必要让两个pod部署的更靠近（比如同一个node上），这样可以减少网络性能消耗")])])])])])])}),[],!1,null,null,null);s.default=n.exports}}]);